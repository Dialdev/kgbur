CheckTopMenuDotted=function(){var e=$("nav.mega-menu"),t=e.find("td.js-dropdown");if("none"==e.parents(".collapse").css("display"))return!1;for(var a=e.closest("div").actual("width"),i=e.find("table").actual("outerWidth"),o=!1;i>a&&(menuItemOldSave=e.find("td").not(".nosave").last(),menuItemOldSave.length);)t.show(),menuItemNewSave='<li class="'+(menuItemOldSave.hasClass("dropdown")?"dropdown-submenu ":"")+(menuItemOldSave.hasClass("active")?"active ":"")+'" data-hidewidth="'+i+'">'+menuItemOldSave.find(".wrap").html()+"</li>",menuItemOldSave.remove(),t.find("> .wrap > .dropdown-menu").prepend(menuItemNewSave),i=e.find("table").actual("outerWidth"),o=!0;if(!o)do{var n=t.find(".dropdown-menu").find("li").length;if(menuItemOldSave=t.find(".dropdown-menu").find("li").first(),!menuItemOldSave.length){t.hide();break}if(menuItemOldSave.attr("data-hidewidth")>a)break;if(menuItemNewSave='<td class="'+(menuItemOldSave.hasClass("dropdown-submenu")?"dropdown ":"")+(menuItemOldSave.hasClass("active")?"active ":"")+'" data-hidewidth="'+a+'"><div class="wrap">'+menuItemOldSave.html()+"</div></td>",menuItemOldSave.remove(),$(menuItemNewSave).insertBefore(e.find("td.js-dropdown")),!n){t.hide();break}i=e.find("table").actual("outerWidth")}while(i<=a);return e.find("td").css("visibility","visible"),!1},CheckTopVisibleMenu=function(e){var t=$(".dropdown-menu:visible").last();if(t.length){var a=arAllcorpOptions.THEME.MENU="first";t.find("a").css("white-space",""),t.css("left",""),t.css("right",""),t.removeClass("toright"),a&&t.css("margin-left","");var i=t.offset().left;if(void 0!==i){var o=t.parents(".mega-menu"),n=o.outerWidth(),s=o.offset().left+n,r=t.parents(".toright").length>0,l=t.parents(".dropdown-menu"),c=l.length>0;if(c)var d=l.first().outerWidth()+l.first().offset().left;var h=0;if(d+t.outerWidth()>s&&t.find("a").css("white-space","normal"),a&&!c){var u=t.parents("td");(t.outerWidth()<u.outerWidth()||u.index()>0)&&(i=t.offset().left)}var p=i+t.outerWidth();if(p>s||r)if(h=s-p,c||r)t.css("left","auto"),t.css("right","100%"),t.addClass("toright");else{var f=parseInt(t.css("left"));t.css("left",f+h+"px")}}}};var CheckPopupTop=function(){var e=$(".jqmWindow.show");if(e.length){var t=$(document).scrollTop(),a=$(window).height(),i=parseInt(e.css("top")),o=e.height();a>=o?i=(a-o)/2:(t>documentScrollTopLast?i-=t-documentScrollTopLast:t<documentScrollTopLast&&(i+=documentScrollTopLast-t),i+o<a?i=a-o:i>0&&(i=0)),e.css("top",i+"px")}};CheckStickyFooter=function(){$(window).resize(function(){try{var e=$("footer").outerHeight();ignoreResize.push(!0),$("footer").css("margin-top","-"+e+"px"),$(".body").css("margin-bottom","-"+e+"px"),$(".main[role=main]").css("padding-bottom",e+25+"px"),ignoreResize.pop()}catch(e){}})};var CheckObjectsSizes=function(){$(".container iframe,.container object,.container video").each(function(){var e=$(this).attr("height"),t=$(this).attr("width");e&&t&&$(this).css("height",$(this).outerWidth()*e/t)})};function onLoadjqm(e){var t=$(e.t).data("name"),a=($(window).height()>e.w.height()?Math.floor(($(window).height()-e.w.height())/2):0)+"px";$.each($(e.t).get(0).attributes,function(t,a){if(/^data\-autoload\-(.+)$/.test(a.nodeName)){var i=a.nodeName.match(/^data\-autoload\-(.+)$/)[1],o=$('input[name="'+i.toUpperCase()+'"]');o.val($(e.t).data("autoload-"+i)).attr("readonly","readonly"),o.attr("title",o.val())}}),$(e.t).data("autohide")&&$(e.w).data("autohide",$(e.t).data("autohide")),"order_product"==t&&$(e.t).data("product")&&$('input[name="PRODUCT"]').val($(e.t).data("product")).attr("readonly","readonly").attr("title",$('input[name="PRODUCT"]').val()),"question"==t&&$(e.t).data("product")&&$('input[name="NEED_PRODUCT"]').val($(e.t).data("product")).attr("readonly","readonly").attr("title",$('input[name="NEED_PRODUCT"]').val()),e.w.addClass("show").css({"margin-left":"-"+Math.floor(e.w.width()/2)+"px",top:a})}function onHide(hash){$(hash.w).data("autohide")&&eval($(hash.w).data("autohide")),hash.w.removeClass("show"),setTimeout(function(){hash.w.empty(),hash.o.remove()},200)}scrollToTop=function(){var e=!1;$("body").append($("<a />").addClass("scroll-to-top").attr({href:"#",id:"scrollToTop"}).append($("<i />").addClass("fa fa-chevron-up fa-white"))),$("#scrollToTop").click(function(e){return e.preventDefault(),$("body, html").animate({scrollTop:0},500),!1}),$(window).scroll(function(){e||(e=!0,$(window).scrollTop()>150?($("#scrollToTop").stop(!0,!0).addClass("visible"),e=!1):($("#scrollToTop").stop(!0,!0).removeClass("visible"),e=!1))})},$.fn.equalizeHeights=function(e){for(var t=this.map(function(t,a){return $(a).css("height",""),1==e?$(a).actual("outerHeight"):$(a).actual("height")}).get(),a=0,i=t.length;a<i;++a)t[a]%2&&--t[a];return this.height(Math.max.apply(this,t))},$.fn.sliceHeight=function(e){function t(t){if(t.each(function(){$(this).css("line-height",""),$(this).css("height","")}),void 0===e.autoslicecount||!1!==e.autoslicecount){var a=t.first().hasClass("item")?t.first().outerWidth():t.first().parents(".item").outerWidth(),i=t.first().parents(".items").outerWidth();i||(i=t.first().parents(".row").outerWidth()),i&&a&&(e.slice=Math.floor(i/a))}if(e.slice)for(var o=0;o<t.length;o+=e.slice)$(t.slice(o,o+e.slice)).equalizeHeights(e.outer);if(e.lineheight){var n=parseInt(e.lineheight);isNaN(n)&&(n=0),t.each(function(){$(this).css("line-height",$(this).actual("height")+n+"px")})}}e=$.extend({slice:null,outer:!1,lineheight:!1,autoslicecount:!0},e);var a=$(this);t(a),BX.addCustomEvent("onWindowResize",function(e){ignoreResize.push(!0),t(a),ignoreResize.pop()})},waitingExists=function(e,t,a){void 0!==a&&e.length&&t>0&&(t=(t=parseInt(t))<0?0:t,$(e).length?a():setTimeout(function(){waitingExists(e,t,a)},t))},waitingNotExists=function(e,t,a,i){void 0!==i&&e.length&&t.length&&a>0&&(a=(a=parseInt(a))<0?0:a,setTimeout(function(){e.length&&!$(t).length&&i()},a))},$.fn.jqmEx=function(){$(this).each(function(){var e=$(this),t=e.data("name");if(t.length){var a=arAllcorpOptions.SITE_DIR+"ajax/form.php",i="",o="",n={};$.each(e.get(0).attributes,function(t,a){var s=a.nodeName,r=e.attr(s);if(o+="["+s+'="'+r+'"]',n[s]=r,/^data\-param\-(.+)$/.test(s)){var l=s.match(/^data\-param\-(.+)$/)[1];i+=l+"="+r+"&"}}),"data-page-url"in n||(n["data-page-url"]=location.href);var s=JSON.stringify(n),r=encodeURIComponent(s);a+="?"+i+"data-trigger="+r,$("."+t+'_frame[data-trigger="'+r+'"]').length||"disabled"!=e.attr("disabled")&&($("body").find("."+t+'_frame[data-trigger="'+r+'"]').remove(),$("body").append('<div class="'+t+'_frame jqmWindow" style="width:500px" data-trigger="'+r+'"></div>'),$("."+t+'_frame[data-trigger="'+r+'"]').jqm({trigger:o,onLoad:function(e){onLoadjqm(e)},onHide:function(e){onHide(e)},ajax:a}))}})},InitFlexSlider=function(){$(".flexslider:not(.thmb):not(.flexslider-init)").each(function(){var e=$(this),t=$.extend({},{animationLoop:!1,controlNav:!1,directionNav:!0},void 0,e.data("plugin-options"));t.after=t.start=function(e){var t={slider:e};BX.onCustomEvent("onSlide",[t])},e.flexslider(t).addClass("flexslider-init"),t.controlNav&&e.addClass("flexslider-control-nav"),t.directionNav&&e.addClass("flexslider-direction-nav")})},CheckHashTabs=function(){var e=window.location.hash;if($(".tabs").length){var t=$(".tabs .nav-tabs li>a[href="+e+"]"),a=e.split("#")[1];e.length?(t.closest(".nav-tabs").find("li").removeClass(),t.closest(".tabs").find(".tab-pane").removeClass("active"),t.parent().addClass("active"),t.closest(".tabs").find(".tab-pane#"+a).addClass("active")):($(".tabs .nav-tabs li").removeClass("active"),$(".tabs .tab-pane").removeClass("active"),$(".tabs .nav-tabs li").eq(0).addClass("active"),$(".tabs .tab-pane").eq(0).addClass("active"))}},$(document).ready(function(){CheckStickyFooter(),CheckTopMenuDotted(),CheckHashTabs(),setTimeout(function(){$(window).resize()},350),$(window).scroll(),"Y"===arAllcorpOptions.THEME.USE_DEBUG_GOALS?$.cookie("_ym_debug",1,{path:"/"}):$.cookie("_ym_debug",null,{path:"/"}),$.extend($.validator.messages,{required:BX.message("JS_REQUIRED"),email:BX.message("JS_FORMAT"),equalTo:BX.message("JS_PASSWORD_COPY"),minlength:BX.message("JS_PASSWORD_LENGTH"),remote:BX.message("JS_ERROR")}),$.validator.addMethod("regexp",function(e,t,a){var i=new RegExp(a);return this.optional(t)||i.test(e)},BX.message("JS_FORMAT")),$.validator.addMethod("filesize",function(e,t,a){return this.optional(t)||t.files[0].size<=a},BX.message("JS_FILE_SIZE")),$.validator.addMethod("date",function(e,t,a){var i=!1;if(!e||e.length<=0)i=!0;else{var o=new RegExp("^([0-9]{2})(.)([0-9]{2})(.)([0-9]{4})$").exec(e);if(o){var n=new Date(o[5],o[3]-1,o[1]);i=n.getMonth()==o[3]-1&&n.getDate()==o[1]&&n.getFullYear()==o[5]}}return i},BX.message("JS_DATE")),$.validator.addMethod("datetime",function(e,t,a){var i=!1;if(!e||e.length<=0)i=!0;else{var o=new RegExp("^([0-9]{2})(.)([0-9]{2})(.)([0-9]{4}) ([0-9]{1,2}):([0-9]{1,2})$").exec(e);if(o){var n=new Date(o[5],o[3]-1,o[1],o[6],o[7]);i=n.getMonth()==o[3]-1&&n.getDate()==o[1]&&n.getFullYear()==o[5]&&n.getHours()==o[6]&&n.getMinutes()==o[7]}}return i},BX.message("JS_DATETIME")),$.validator.addMethod("extension",function(e,t,a){return a="string"==typeof a?a.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp(".("+a+")$","i"))},BX.message("JS_FILE_EXT")),$.validator.addMethod("captcha",function(e,t,a){return console.log($(t),$(t).closest(".form-body")),$.validator.methods.remote.call(this,e,t,{url:arAllcorpOptions.SITE_DIR+"ajax/check-captcha.php",type:"post",data:{captcha_word:e,captcha_sid:function(){return $(t).closest(".form-body").find('input[name="captcha_sid"]').val()}}})},BX.message("JS_ERROR")),$("body").on("click",".refresh",function(e){e.preventDefault(),$.ajax({url:arAllcorpOptions.SITE_DIR+"ajax/captcha.php"}).done(function(e){$(".captcha_sid").val(e),$(".captcha_img").attr("src","/bitrix/tools/captcha.php?captcha_sid="+e)})}),$.validator.addMethod("recaptcha",function(e,t,a){var i=$(t).closest("form").find(".g-recaptcha").attr("data-widgetid");return void 0===i||""!=grecaptcha.getResponse(i)},BX.message("JS_RECAPTCHA_ERROR")),$.validator.addMethod("processing_approval",function(e,t,a){return $(t).is(":checked")},BX.message("JS_PROCESSING_ERROR")),$.validator.addClassRules({phone:{regexp:arAllcorpOptions.THEME.VALIDATE_PHONE_MASK},confirm_password:{equalTo:'input[name="REGISTER[PASSWORD]"]',minlength:6},password:{minlength:6},inputfile:{extension:arAllcorpOptions.THEME.VALIDATE_FILE_EXT,filesize:5e6},datetime:{datetime:""},captcha:{captcha:""},recaptcha:{recaptcha:""},processing_approval:{processing_approval:""}}),InitFlexSlider(),waitingNotExists(".detail .galery #slider",".detail .galery #slider .flex-viewport",1e3,function(){InitFlexSlider(),setTimeout(function(){$(window).resize()},350)}),$("input[type=file]").uniform({fileButtonHtml:BX.message("UNIFORM_FILE_BUTTON_NAME"),fileDefaultHtml:BX.message("UNIFORM_FILE_MESSAGE_DEFAULT")}),jQuery.browser.mobile?($(".style-switcher").addClass("hidden"),$(".hint span").remove(),$('*[data-event="jqm"]').live("click",function(e){e.preventDefault();var t=$(this),a=t.data("name");if(a.length){var i=arAllcorpOptions.SITE_DIR+"form/",o="",n={};$.each(t.get(0).attributes,function(e,a){var i=a.nodeName,s=t.attr(i);if(n[i]=s,/^data\-param\-(.+)$/.test(i)){var r=i.match(/^data\-param\-(.+)$/)[1];o+=r+"="+s+"&"}}),"data-page-url"in n||(n["data-page-url"]=location.href);var s=JSON.stringify(n),r=encodeURIComponent(s);i+="?name="+a+"&"+o+"data-trigger="+r,location.href=i}})):$('*[data-event="jqm"]').live("click",function(e){e.preventDefault(),$(this).jqmEx(),$(this).trigger("click")}),$("a.fancybox:has(img)").fancybox();var e=!1;$("#mainMenu li.dropdown > a, #mainMenu li.dropdown-submenu > a").on("click",function(t){var a=$(this);t.preventDefault(),e=a.parent().hasClass("resp-active"),a.closest(".dropdown-menu").length||$("#mainMenu").find(".resp-active").removeClass("resp-active"),e?a.closest("li").removeClass("resp-active"):a.closest("li").addClass("resp-active")}),$(document).on("click",".mega-menu .dropdown-menu",function(e){e.stopPropagation()}),$(document).on("click",".mega-menu .dropdown-toggle.more-items",function(e){e.preventDefault()}),$(".table-menu .dropdown,.table-menu .dropdown-submenu,.table-menu .dropdown-toggle").live("mouseenter",function(){CheckTopVisibleMenu()});if($("section.toggle > label").prepend($("<i />").addClass("icon icon-plus")),$("section.toggle > label").prepend($("<i />").addClass("icon icon-minus")),$("section.toggle.active > p").addClass("preview-active"),$("section.toggle.active > div.toggle-content").slideDown(350,function(){}),$("section.toggle > label").click(function(e){var t=$(this).parent(),a=$(this).parents("div.toogle"),i=!1;if(a.hasClass("toogle-accordion")&&void 0!==e.originalEvent&&a.find("section.toggle.active > label").trigger("click"),t.toggleClass("active"),t.find("> p").get(0)){var o=(i=t.find("> p")).css("height");i.css("height","auto");var n=i.css("height");i.css("height",o)}var s=t.find("> div.toggle-content");t.hasClass("active")?($(i).animate({height:n},350,function(){$(this).addClass("preview-active")}),s.slideDown(350,function(){})):($(i).animate({height:25},350,function(){$(this).removeClass("preview-active")}),s.slideUp(350,function(){}))}),$(".accordion-head").on("click",function(e){e.preventDefault(),$(this).hasClass("accordion-open")?$(this).addClass("accordion-close").removeClass("accordion-open"):$(this).addClass("accordion-open").removeClass("accordion-close")}),$("[data-appear-progress-animation]").each(function(){var e=$(this);e.appear(function(){var t=e.attr("data-appear-animation-delay")?e.attr("data-appear-animation-delay"):1;t>1&&e.css("animation-delay",t+"ms"),e.addClass(e.attr("data-appear-animation")),setTimeout(function(){e.animate({width:e.attr("data-appear-progress-animation")},1500,"easeOutQuad",function(){e.find(".progress-bar-tooltip").animate({opacity:1},500,"easeOutQuad")})},t)},{accX:0,accY:-50})}),$("a[rel=tooltip]").tooltip(),$("span[data-toggle=tooltip]").tooltip(),$("select.sort").live("change",function(){location.href=$(this).val()}),setTimeout(function(e){$(".catalog.group.list .item").each(function(){var e=$(this);(tmp=e.find(".image").outerHeight()-e.find(".text_info").outerHeight())>0&&e.find(".text_info .titles").height(e.find(".text_info .titles").outerHeight()+tmp)})},50),$(".thumbs .item a").live("click",function(){$(".thumbs .item").removeClass("current"),$(this).closest(".item").toggleClass("current"),$(".slides li"+$(this).attr("href")).addClass("current").siblings().removeClass("current")}),$(".tabs .nav-tabs li>a").on("click",function(){var e=$(this),t=e.attr("href"),a=e.parent().index(),i=e.closest(".tabs").find(".tab-pane").eq(a);i.attr("id",""),window.location.hash=t,i.attr("id",t.split("#")[1]).addClass("active")}),$(".mega-menu ul.nav .search input").on("keyup",function(e){var t=$(this).val();$(".top-row .search input").val(t),13==e.keyCode&&$(".top-row .search form").submit()}),$(".top-row .search input").on("keyup",function(e){var t=$(this).val();$(".mega-menu ul.nav .search input").val(t),13==e.keyCode&&$(".top-row .search form").submit()}),$(".mega-menu ul.nav .search button").on("click",function(e){e.preventDefault();var t=$(this).closest(".search").find("input").val();$(".top-row .search input").val(t),$(".top-row .search form").submit()}),$(".mega-menu .search").length){var t=$(".mega-menu .search").detach();$("header .nav-main-collapse").append('<ul class="search_wrap"></ul>'),$("header .nav-main-collapse .search_wrap").html(t)}}),window.addEventListener("popstate",function(e){CheckHashTabs()},!1),waitCounter=function(e,t,a){"object"==typeof window["yaCounter"+e]?"function"==typeof a&&a():setTimeout(function(){waitCounter(e,t,a)},t)};var waitReCaptcha=function(e,t){"object"==typeof grecaptcha?"function"==typeof t&&t():setTimeout(function(){waitReCaptcha(e,t)},e)},reCaptchaRender=function(e){$(".g-recaptcha:not(.rendered)").length&&waitReCaptcha(50,function(){$(".g-recaptcha:not(.rendered)").each(function(){$this=$(this),$this.addClass("rendered");var e=grecaptcha.render($this[0],{sitekey:$this.attr("data-sitekey"),theme:$this.attr("data-theme"),size:$this.attr("data-size"),callback:$this.attr("data-callback")});$this.attr("data-widgetid",e)})})},reCaptchaVerify=function(e){$(".g-recaptcha.rendered").each(function(){var e=$(this).attr("data-widgetid");void 0!==e&&""!=grecaptcha.getResponse(e)&&$(this).closest("form").find(".recaptcha").valid()})},timerScroll=!1,ignoreScroll=[],documentScrollTopLast=$(document).scrollTop();$(window).scroll(function(){CheckPopupTop(),ignoreScroll.length||(timerScroll&&(clearTimeout(timerScroll),timerScroll=!1),timerScroll=setTimeout(function(){BX.onCustomEvent("onWindowScroll",!1)},100)),documentScrollTopLast=$(document).scrollTop()});var timerResize=!1,ignoreResize=[];$(window).resize(function(){CheckPopupTop(),ignoreResize.length||(timerResize&&(clearTimeout(timerResize),timerResize=!1),timerResize=setTimeout(function(){BX.onCustomEvent("onWindowResize",!1)},100))}),BX.addCustomEvent("onWindowScroll",function(e){try{ignoreScroll.push(!0)}catch(e){}finally{ignoreScroll.pop()}}),BX.addCustomEvent("onWindowResize",function(e){try{ignoreResize.push(!0),CheckTopMenuDotted(),CheckTopVisibleMenu(),CheckObjectsSizes()}catch(e){}finally{ignoreResize.pop()}}),BX.addCustomEvent("onSlide",function(e){try{if(ignoreResize.push(!0),e){var t=e.slider;if(t){t.find(".item").removeClass("current");var a=t.find(".item").eq(t.currentSlide);a.addClass("current"),a.addClass("shown"),t.resize()}}}catch(e){}finally{ignoreResize.pop()}}),BX.addCustomEvent("onCounterGoals",function(e){if("Y"===arAllcorpOptions.THEME.USE_YA_COUNTER){var t=arAllcorpOptions.THEME.YA_COUNTER_ID;if(t=parseInt(t),"object"!=typeof e&&(e={goal:"undefined"}),"string"!=typeof e.goal&&(e.goal="undefined"),t)try{waitCounter(t,50,function(){var a=window["yaCounter"+t];"object"==typeof a&&a.reachGoal(e.goal)})}catch(e){console.error(e)}else console.info("Bad counter id!",t)}});