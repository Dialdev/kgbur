CheckTopMenuDotted=function(){var e=$("nav.mega-menu"),t=e.find("td.js-dropdown");if("none"==e.parents(".collapse").css("display"))return!1;for(var a=e.closest("div").actual("width"),i=e.find("table").actual("outerWidth"),o=!1;a<i&&(menuItemOldSave=e.find("td").not(".nosave").last(),menuItemOldSave.length);)t.show(),menuItemNewSave='<li class="'+(menuItemOldSave.hasClass("dropdown")?"dropdown-submenu ":"")+(menuItemOldSave.hasClass("active")?"active ":"")+'" data-hidewidth="'+i+'">'+menuItemOldSave.find(".wrap").html()+"</li>",menuItemOldSave.remove(),t.find("> .wrap > .dropdown-menu").prepend(menuItemNewSave),i=e.find("table").actual("outerWidth"),o=!0;if(!o)do{var n=t.find(".dropdown-menu").find("li").length;if(menuItemOldSave=t.find(".dropdown-menu").find("li").first(),!menuItemOldSave.length){t.hide();break}if(a<menuItemOldSave.attr("data-hidewidth"))break;if(menuItemNewSave='<td class="'+(menuItemOldSave.hasClass("dropdown-submenu")?"dropdown ":"")+(menuItemOldSave.hasClass("active")?"active ":"")+'" data-hidewidth="'+a+'"><div class="wrap">'+menuItemOldSave.html()+"</div></td>",menuItemOldSave.remove(),$(menuItemNewSave).insertBefore(e.find("td.js-dropdown")),!n){t.hide();break}i=e.find("table").actual("outerWidth")}while(i<=a);return e.find("td").css("visibility","visible"),!1},CheckTopVisibleMenu=function(e){var t=$(".dropdown-menu:visible").last();if(t.length){var a=arAllcorpOptions.THEME.MENU="first";t.find("a").css("white-space",""),t.css("left",""),t.css("right",""),t.removeClass("toright"),a&&t.css("margin-left","");var i=t.offset().left;if(void 0!==i){var o=t.parents(".mega-menu"),n=o.outerWidth(),s=o.offset().left+n,r=0<t.parents(".toright").length,l=t.parents(".dropdown-menu"),c=0<l.length;if(c)var d=l.first().outerWidth()+l.first().offset().left;var h=0;if(d+t.outerWidth()>s&&t.find("a").css("white-space","normal"),a&&!c){var u=t.parents("td");(t.outerWidth()<u.outerWidth()||0<u.index())&&(i=t.offset().left)}var p=i+t.outerWidth();if(s<p||r)if(h=s-p,c||r)t.css("left","auto"),t.css("right","100%"),t.addClass("toright");else{var f=parseInt(t.css("left"));t.css("left",f+h+"px")}}}};var CheckPopupTop=function(){var e=$(".jqmWindow.show");if(e.length){var t=$(document).scrollTop(),a=$(window).height(),i=parseInt(e.css("top")),o=e.height();o<=a?i=(a-o)/2:(documentScrollTopLast<t?i-=t-documentScrollTopLast:t<documentScrollTopLast&&(i+=documentScrollTopLast-t),i+o<a?i=a-o:0<i&&(i=0)),e.css("top",i+"px")}};CheckStickyFooter=function(){$(window).resize(function(){try{var e=$("footer").outerHeight();ignoreResize.push(!0),$("footer").css("margin-top","-"+e+"px"),$(".body").css("margin-bottom","-"+e+"px"),$(".main[role=main]").css("padding-bottom",e+25+"px"),ignoreResize.pop()}catch(e){}})};var CheckObjectsSizes=function(){$(".container iframe,.container object,.container video").each(function(){var e=$(this).attr("height"),t=$(this).attr("width");e&&t&&$(this).css("height",$(this).outerWidth()*e/t)})};function onLoadjqm(o){var e=$(o.t).data("name"),t=($(window).height()>o.w.height()?Math.floor(($(window).height()-o.w.height())/2):0)+"px";$.each($(o.t).get(0).attributes,function(e,t){if(/^data\-autoload\-(.+)$/.test(t.nodeName)){var a=t.nodeName.match(/^data\-autoload\-(.+)$/)[1],i=$('input[name="'+a.toUpperCase()+'"]');i.val($(o.t).data("autoload-"+a)).attr("readonly","readonly"),i.attr("title",i.val())}}),$(o.t).data("autohide")&&$(o.w).data("autohide",$(o.t).data("autohide")),"order_product"==e&&$(o.t).data("product")&&$('input[name="PRODUCT"]').val($(o.t).data("product")).attr("readonly","readonly").attr("title",$('input[name="PRODUCT"]').val()),"question"==e&&$(o.t).data("product")&&$('input[name="NEED_PRODUCT"]').val($(o.t).data("product")).attr("readonly","readonly").attr("title",$('input[name="NEED_PRODUCT"]').val()),o.w.addClass("show").css({"margin-left":"-"+Math.floor(o.w.width()/2)+"px",top:t})}function onHide(hash){$(hash.w).data("autohide")&&eval($(hash.w).data("autohide")),hash.w.removeClass("show"),setTimeout(function(){hash.w.empty(),hash.o.remove()},200)}scrollToTop=function(){var e=!1;$("body").append($("<a />").addClass("scroll-to-top").attr({href:"#",id:"scrollToTop"}).append($("<i />").addClass("fa fa-chevron-up fa-white"))),$("#scrollToTop").click(function(e){return e.preventDefault(),$("body, html").animate({scrollTop:0},500),!1}),$(window).scroll(function(){e||(e=!0,e=(150<$(window).scrollTop()?$("#scrollToTop").stop(!0,!0).addClass("visible"):$("#scrollToTop").stop(!0,!0).removeClass("visible"),!1))})},$.fn.equalizeHeights=function(a){for(var e=this.map(function(e,t){return $(t).css("height",""),1==a?$(t).actual("outerHeight"):$(t).actual("height")}).get(),t=0,i=e.length;t<i;++t)e[t]%2&&--e[t];return this.height(Math.max.apply(this,e))},$.fn.sliceHeight=function(n){function t(e){if(e.each(function(){$(this).css("line-height",""),$(this).css("height","")}),void 0===n.autoslicecount||!1!==n.autoslicecount){var t=e.first().hasClass("item")?e.first().outerWidth():e.first().parents(".item").outerWidth(),a=e.first().parents(".items").outerWidth();a||(a=e.first().parents(".row").outerWidth()),a&&t&&(n.slice=Math.floor(a/t))}if(n.slice)for(var i=0;i<e.length;i+=n.slice)$(e.slice(i,i+n.slice)).equalizeHeights(n.outer);if(n.lineheight){var o=parseInt(n.lineheight);isNaN(o)&&(o=0),e.each(function(){$(this).css("line-height",$(this).actual("height")+o+"px")})}}n=$.extend({slice:null,outer:!1,lineheight:!1,autoslicecount:!0},n);var a=$(this);t(a),BX.addCustomEvent("onWindowResize",function(e){ignoreResize.push(!0),t(a),ignoreResize.pop()})},waitingExists=function(e,t,a){void 0!==a&&e.length&&0<t&&(t=(t=parseInt(t))<0?0:t,$(e).length?a():setTimeout(function(){waitingExists(e,t,a)},t))},waitingNotExists=function(e,t,a,i){void 0!==i&&e.length&&t.length&&0<a&&(a=(a=parseInt(a))<0?0:a,setTimeout(function(){e.length&&!$(t).length&&i()},a))},$.fn.jqmEx=function(){$(this).each(function(){var n=$(this),e=n.data("name");if(e.length){var t=arAllcorpOptions.SITE_DIR+"ajax/form.php",s="",r="",l={};$.each(n.get(0).attributes,function(e,t){var a=t.nodeName,i=n.attr(a);if(r+="["+a+'="'+i+'"]',l[a]=i,/^data\-param\-(.+)$/.test(a)){var o=a.match(/^data\-param\-(.+)$/)[1];s+=o+"="+i+"&"}}),"data-page-url"in l||(l["data-page-url"]=location.href);var a=JSON.stringify(l),i=encodeURIComponent(a);t+="?"+s+"data-trigger="+i,$("."+e+'_frame[data-trigger="'+i+'"]').length||"disabled"!=n.attr("disabled")&&($("body").find("."+e+'_frame[data-trigger="'+i+'"]').remove(),$("body").append('<div class="'+e+'_frame jqmWindow" style="width:500px" data-trigger="'+i+'"></div>'),$("."+e+'_frame[data-trigger="'+i+'"]').jqm({trigger:r,onLoad:function(e){onLoadjqm(e)},onHide:function(e){onHide(e)},ajax:t}))}})},InitFlexSlider=function(){$(".flexslider:not(.thmb):not(.flexslider-init)").each(function(){var e=$(this),t=$.extend({},{animationLoop:!1,controlNav:!1,directionNav:!0},void 0,e.data("plugin-options"));t.after=t.start=function(e){var t={slider:e};BX.onCustomEvent("onSlide",[t])},e.flexslider(t).addClass("flexslider-init"),t.controlNav&&e.addClass("flexslider-control-nav"),t.directionNav&&e.addClass("flexslider-direction-nav")})},CheckHashTabs=function(){var e=window.location.hash;if($(".tabs").length){var t=$(".tabs .nav-tabs li>a[href="+e+"]"),a=e.split("#")[1];e.length?(t.closest(".nav-tabs").find("li").removeClass(),t.closest(".tabs").find(".tab-pane").removeClass("active"),t.parent().addClass("active"),t.closest(".tabs").find(".tab-pane#"+a).addClass("active")):($(".tabs .nav-tabs li").removeClass("active"),$(".tabs .tab-pane").removeClass("active"),$(".tabs .nav-tabs li").eq(0).addClass("active"),$(".tabs .tab-pane").eq(0).addClass("active"))}},$(document).ready(function(){CheckStickyFooter(),CheckTopMenuDotted(),CheckHashTabs(),setTimeout(function(){$(window).resize()},350),$(window).scroll(),"Y"===arAllcorpOptions.THEME.USE_DEBUG_GOALS?$.cookie("_ym_debug",1,{path:"/"}):$.cookie("_ym_debug",null,{path:"/"}),$.extend($.validator.messages,{required:BX.message("JS_REQUIRED"),email:BX.message("JS_FORMAT"),equalTo:BX.message("JS_PASSWORD_COPY"),minlength:BX.message("JS_PASSWORD_LENGTH"),remote:BX.message("JS_ERROR")}),$.validator.addMethod("regexp",function(e,t,a){var i=new RegExp(a);return this.optional(t)||i.test(e)},BX.message("JS_FORMAT")),$.validator.addMethod("filesize",function(e,t,a){return this.optional(t)||t.files[0].size<=a},BX.message("JS_FILE_SIZE")),$.validator.addMethod("date",function(e,t,a){var i=!1;if(!e||e.length<=0)i=!0;else{var o=new RegExp("^([0-9]{2})(.)([0-9]{2})(.)([0-9]{4})$").exec(e);if(o){var n=new Date(o[5],o[3]-1,o[1]);i=n.getMonth()==o[3]-1&&n.getDate()==o[1]&&n.getFullYear()==o[5]}}return i},BX.message("JS_DATE")),$.validator.addMethod("datetime",function(e,t,a){var i=!1;if(!e||e.length<=0)i=!0;else{var o=new RegExp("^([0-9]{2})(.)([0-9]{2})(.)([0-9]{4}) ([0-9]{1,2}):([0-9]{1,2})$").exec(e);if(o){var n=new Date(o[5],o[3]-1,o[1],o[6],o[7]);i=n.getMonth()==o[3]-1&&n.getDate()==o[1]&&n.getFullYear()==o[5]&&n.getHours()==o[6]&&n.getMinutes()==o[7]}}return i},BX.message("JS_DATETIME")),$.validator.addMethod("extension",function(e,t,a){return a="string"==typeof a?a.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp(".("+a+")$","i"))},BX.message("JS_FILE_EXT")),$.validator.addMethod("captcha",function(e,t,a){return console.log($(t),$(t).closest(".form-body")),$.validator.methods.remote.call(this,e,t,{url:arAllcorpOptions.SITE_DIR+"ajax/check-captcha.php",type:"post",data:{captcha_word:e,captcha_sid:function(){return $(t).closest(".form-body").find('input[name="captcha_sid"]').val()}}})},BX.message("JS_ERROR")),$("body").on("click",".refresh",function(e){e.preventDefault(),$.ajax({url:arAllcorpOptions.SITE_DIR+"ajax/captcha.php"}).done(function(e){$(".captcha_sid").length&&($(".captcha_sid").val(e),$(".captcha_img").attr("src","/bitrix/tools/captcha.php?captcha_sid="+e))})}),$.validator.addMethod("recaptcha",function(e,t,a){var i=$(t).closest("form").find(".g-recaptcha").attr("data-widgetid");return void 0===i||""!=grecaptcha.getResponse(i)},BX.message("JS_RECAPTCHA_ERROR")),$.validator.addMethod("processing_approval",function(e,t,a){return $(t).is(":checked")},BX.message("JS_PROCESSING_ERROR")),$.validator.addClassRules({phone:{regexp:arAllcorpOptions.THEME.VALIDATE_PHONE_MASK},confirm_password:{equalTo:'input[name="REGISTER[PASSWORD]"]',minlength:6},password:{minlength:6},inputfile:{extension:arAllcorpOptions.THEME.VALIDATE_FILE_EXT,filesize:5e6},datetime:{datetime:""},captcha:{captcha:""},recaptcha:{recaptcha:""},processing_approval:{processing_approval:""}}),InitFlexSlider(),waitingNotExists(".detail .galery #slider",".detail .galery #slider .flex-viewport",1e3,function(){InitFlexSlider(),setTimeout(function(){$(window).resize()},350)}),$("input[type=file]").uniform({fileButtonHtml:BX.message("UNIFORM_FILE_BUTTON_NAME"),fileDefaultHtml:BX.message("UNIFORM_FILE_MESSAGE_DEFAULT")}),jQuery.browser.mobile?($(".style-switcher").addClass("hidden"),$(".hint span").remove(),$('*[data-event="jqm"]').live("click",function(e){e.preventDefault();var n=$(this),t=n.data("name");if(t.length){var a=arAllcorpOptions.SITE_DIR+"form/",s="",r={};$.each(n.get(0).attributes,function(e,t){var a=t.nodeName,i=n.attr(a);if(r[a]=i,/^data\-param\-(.+)$/.test(a)){var o=a.match(/^data\-param\-(.+)$/)[1];s+=o+"="+i+"&"}}),"data-page-url"in r||(r["data-page-url"]=location.href);var i=JSON.stringify(r),o=encodeURIComponent(i);a+="?name="+t+"&"+s+"data-trigger="+o,location.href=a}})):$('*[data-event="jqm"]').live("click",function(e){e.preventDefault(),$(this).jqmEx(),$(this).trigger("click")}),$("a.fancybox:has(img)").fancybox();var a=!1;$("#mainMenu li.dropdown > a, #mainMenu li.dropdown-submenu > a").on("click",function(e){var t=$(this);e.preventDefault(),a=t.parent().hasClass("resp-active"),t.closest(".dropdown-menu").length||$("#mainMenu").find(".resp-active").removeClass("resp-active"),a?t.closest("li").removeClass("resp-active"):t.closest("li").addClass("resp-active")}),$(document).on("click",".mega-menu .dropdown-menu",function(e){e.stopPropagation()}),$(document).on("click",".mega-menu .dropdown-toggle.more-items",function(e){e.preventDefault()}),$(".table-menu .dropdown,.table-menu .dropdown-submenu,.table-menu .dropdown-toggle").live("mouseenter",function(){CheckTopVisibleMenu()});if($("section.toggle > label").prepend($("<i />").addClass("icon icon-plus")),$("section.toggle > label").prepend($("<i />").addClass("icon icon-minus")),$("section.toggle.active > p").addClass("preview-active"),$("section.toggle.active > div.toggle-content").slideDown(350,function(){}),$("section.toggle > label").click(function(e){var t=$(this).parent(),a=$(this).parents("div.toogle"),i=!1;if(a.hasClass("toogle-accordion")&&void 0!==e.originalEvent&&a.find("section.toggle.active > label").trigger("click"),t.toggleClass("active"),t.find("> p").get(0)){var o=(i=t.find("> p")).css("height");i.css("height","auto");var n=i.css("height");i.css("height",o)}var s=t.find("> div.toggle-content");t.hasClass("active")?($(i).animate({height:n},350,function(){$(this).addClass("preview-active")}),s.slideDown(350,function(){})):($(i).animate({height:25},350,function(){$(this).removeClass("preview-active")}),s.slideUp(350,function(){}))}),$(".accordion-head").on("click",function(e){e.preventDefault(),$(this).hasClass("accordion-open")?$(this).addClass("accordion-close").removeClass("accordion-open"):$(this).addClass("accordion-open").removeClass("accordion-close")}),$("[data-appear-progress-animation]").each(function(){var t=$(this);t.appear(function(){var e=t.attr("data-appear-animation-delay")?t.attr("data-appear-animation-delay"):1;1<e&&t.css("animation-delay",e+"ms"),t.addClass(t.attr("data-appear-animation")),setTimeout(function(){t.animate({width:t.attr("data-appear-progress-animation")},1500,"easeOutQuad",function(){t.find(".progress-bar-tooltip").animate({opacity:1},500,"easeOutQuad")})},e)},{accX:0,accY:-50})}),$("a[rel=tooltip]").tooltip(),$("span[data-toggle=tooltip]").tooltip(),$("select.sort").live("change",function(){location.href=$(this).val()}),setTimeout(function(e){$(".catalog.group.list .item").each(function(){var e=$(this);0<(tmp=e.find(".image").outerHeight()-e.find(".text_info").outerHeight())&&e.find(".text_info .titles").height(e.find(".text_info .titles").outerHeight()+tmp)})},50),$(".thumbs .item a").live("click",function(){$(".thumbs .item").removeClass("current"),$(this).closest(".item").toggleClass("current"),$(".slides li"+$(this).attr("href")).addClass("current").siblings().removeClass("current")}),$(".tabs .nav-tabs li>a").on("click",function(){var e=$(this),t=e.attr("href"),a=e.parent().index(),i=e.closest(".tabs").find(".tab-pane").eq(a);i.attr("id",""),window.location.hash=t,i.attr("id",t.split("#")[1]).addClass("active")}),$(".mega-menu ul.nav .search input").on("keyup",function(e){var t=$(this).val();$(".top-row .search input").val(t),13==e.keyCode&&$(".top-row .search form").submit()}),$(".top-row .search input").on("keyup",function(e){var t=$(this).val();$(".mega-menu ul.nav .search input").val(t),13==e.keyCode&&$(".top-row .search form").submit()}),$(".mega-menu ul.nav .search button").on("click",function(e){e.preventDefault();var t=$(this).closest(".search").find("input").val();$(".top-row .search input").val(t),$(".top-row .search form").submit()}),$(".mega-menu .search").length){var e=$(".mega-menu .search").detach();$("header .nav-main-collapse").append('<ul class="search_wrap"></ul>'),$("header .nav-main-collapse .search_wrap").html(e)}}),window.addEventListener("popstate",function(e){CheckHashTabs()},!1),waitCounter=function(e,t,a){"object"==typeof window["yaCounter"+e]?"function"==typeof a&&a():setTimeout(function(){waitCounter(e,t,a)},t)};var waitReCaptcha=function(e,t){"object"==typeof grecaptcha?"function"==typeof t&&t():setTimeout(function(){waitReCaptcha(e,t)},e)},reCaptchaRender=function(e){$(".g-recaptcha:not(.rendered)").length&&waitReCaptcha(50,function(){$(".g-recaptcha:not(.rendered)").each(function(){$this=$(this),$this.addClass("rendered");var e=grecaptcha.render($this[0],{sitekey:$this.attr("data-sitekey"),theme:$this.attr("data-theme"),size:$this.attr("data-size"),callback:$this.attr("data-callback")});$this.attr("data-widgetid",e)})})},reCaptchaVerify=function(e){$(".g-recaptcha.rendered").each(function(){var e=$(this).attr("data-widgetid");void 0!==e&&""!=grecaptcha.getResponse(e)&&$(this).closest("form").find(".recaptcha").valid()})},timerScroll=!1,ignoreScroll=[],documentScrollTopLast=$(document).scrollTop();$(window).scroll(function(){CheckPopupTop(),ignoreScroll.length||(timerScroll&&(clearTimeout(timerScroll),timerScroll=!1),timerScroll=setTimeout(function(){BX.onCustomEvent("onWindowScroll",!1)},100)),documentScrollTopLast=$(document).scrollTop()});var timerResize=!1,ignoreResize=[];$(window).resize(function(){CheckPopupTop(),ignoreResize.length||(timerResize&&(clearTimeout(timerResize),timerResize=!1),timerResize=setTimeout(function(){BX.onCustomEvent("onWindowResize",!1)},100))}),BX.addCustomEvent("onWindowScroll",function(e){try{ignoreScroll.push(!0)}catch(e){}finally{ignoreScroll.pop()}}),BX.addCustomEvent("onWindowResize",function(e){try{ignoreResize.push(!0),CheckTopMenuDotted(),CheckTopVisibleMenu(),CheckObjectsSizes()}catch(e){}finally{ignoreResize.pop()}}),BX.addCustomEvent("onSlide",function(e){try{if(ignoreResize.push(!0),e){var t=e.slider;if(t){t.find(".item").removeClass("current");var a=t.find(".item").eq(t.currentSlide);a.addClass("current"),a.addClass("shown"),t.resize()}}}catch(e){}finally{ignoreResize.pop()}}),BX.addCustomEvent("onCounterGoals",function(t){if("Y"===arAllcorpOptions.THEME.USE_YA_COUNTER){var a=arAllcorpOptions.THEME.YA_COUNTER_ID;if(a=parseInt(a),"object"!=typeof t&&(t={goal:"undefined"}),"string"!=typeof t.goal&&(t.goal="undefined"),a)try{waitCounter(a,50,function(){var e=window["yaCounter"+a];"object"==typeof e&&e.reachGoal(t.goal)})}catch(e){console.error(e)}else console.info("Bad counter id!",a)}});